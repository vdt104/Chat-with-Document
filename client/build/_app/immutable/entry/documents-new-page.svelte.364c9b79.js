import{T as G,U as ce,V as pe,W as de,S as oe,i as le,s as ne,e as Q,b as T,v as L,d as y,f as M,g as m,h as g,X as me,D as ae,k as E,l as v,m as A,n as h,p as Y,E as _,C as Z,K as _e,L as ge,M as $e,N as be,q as N,a as S,r as V,c as j,H as x,O as he,J as ye,y as q,z,A as F,B as H,u as we}from"../chunks/index.b8ab26f5.js";import{b as ke,g as Ee}from"../chunks/navigation.3574d0e5.js";import{A as ie}from"../chunks/Alert.f968b652.js";import{B as ve}from"../chunks/Button.da820627.js";import{w as fe}from"../chunks/index.a3ecfcb2.js";import{a as Ae,g as De}from"../chunks/axios.44236252.js";const Pe={data:[],error:"",uploadProgress:0},ue=fe(Pe),R=o=>{ue.update(e=>({...e,...o}))},Ie=o=>{const e=Math.round(o.loaded/o.total*100);R({uploadProgress:e})},Ce=async o=>{R({error:""});try{const e=new FormData;e.append("file",o),await Ae.post("/pdfs",e,{onUploadProgress:Ie})}catch(e){return R({error:De(e)})}},Te=()=>{R({error:"",uploadProgress:0})};function ee(o){return Object.prototype.toString.call(o)==="[object Date]"}function J(o,e){if(o===e||o!==o)return()=>o;const r=typeof o;if(r!==typeof e||Array.isArray(o)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(o)){const t=e.map((s,l)=>J(o[l],s));return s=>t.map(l=>l(s))}if(r==="object"){if(!o||!e)throw new Error("Object cannot be null");if(ee(o)&&ee(e)){o=o.getTime(),e=e.getTime();const l=e-o;return n=>new Date(o+n*l)}const t=Object.keys(e),s={};return t.forEach(l=>{s[l]=J(o[l],e[l])}),l=>{const n={};return t.forEach(i=>{n[i]=s[i](l)}),n}}if(r==="number"){const t=e-o;return s=>o+s*t}throw new Error(`Cannot interpolate ${r} values`)}function Ue(o,e={}){const r=fe(o);let t,s=o;function l(n,i){if(o==null)return r.set(o=n),Promise.resolve();s=n;let a=t,f=!1,{delay:$=0,duration:w=400,easing:D=de,interpolate:O=J}=G(G({},e),i);if(w===0)return a&&(a.abort(),a=null),r.set(o=s),Promise.resolve();const P=ce()+$;let I;return t=pe(C=>{if(C<P)return!0;f||(I=O(o,n),typeof w=="function"&&(w=w(o,n)),f=!0),a&&(a.abort(),a=null);const U=C-P;return U>w?(r.set(o=n),!1):(r.set(o=I(D(U/w))),!0)}),t.promise}return{set:l,update:(n,i)=>l(n(s,o),i),subscribe:r.subscribe}}function Se(o){let e,r;return{c(){e=E("div"),r=E("div"),this.h()},l(t){e=v(t,"DIV",{class:!0});var s=A(e);r=v(s,"DIV",{class:!0,role:!0,style:!0}),A(r).forEach(g),s.forEach(g),this.h()},h(){h(r,"class","flex flex-col justify-center overflow-hidden bg-blue-800"),h(r,"role","progressbar"),Y(r,"width",o[0]+"%"),h(e,"class","flex my-3 w-full h-1.5 bg-gray-200 rounded-full overflow-hidden dark:bg-gray-700")},m(t,s){T(t,e,s),_(e,r)},p(t,s){s&1&&Y(r,"width",t[0]+"%")},i:Z,o:Z,d(t){t&&g(e)}}}function je(o){let e;const r=o[5].default,t=_e(r,o,o[4],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,l){t&&t.m(s,l),e=!0},p(s,l){t&&t.p&&(!e||l&16)&&ge(t,r,s,s[4],e?be(r,s[4],l,null):$e(s[4]),null)},i(s){e||(m(t,s),e=!0)},o(s){y(t,s),e=!1},d(s){t&&t.d(s)}}}function Ne(o){let e,r,t,s;const l=[je,Se],n=[];function i(a,f){return a[2].default&&a[0]===100?0:1}return e=i(o),r=n[e]=l[e](o),{c(){r.c(),t=Q()},l(a){r.l(a),t=Q()},m(a,f){n[e].m(a,f),T(a,t,f),s=!0},p(a,[f]){let $=e;e=i(a),e===$?n[e].p(a,f):(L(),y(n[$],1,1,()=>{n[$]=null}),M(),r=n[e],r?r.p(a,f):(r=n[e]=l[e](a),r.c()),m(r,1),r.m(t.parentNode,t))},i(a){s||(m(r),s=!0)},o(a){y(r),s=!1},d(a){n[e].d(a),a&&g(t)}}}function Ve(o,e,r){let t,{$$slots:s={},$$scope:l}=e;const n=me(s);let{progress:i=0}=e;const a=Ue(1,{duration:1e3});return ae(o,a,f=>r(0,t=f)),o.$$set=f=>{"progress"in f&&r(3,i=f.progress),"$$scope"in f&&r(4,l=f.$$scope)},o.$$.update=()=>{o.$$.dirty&8&&a.set(i)},[t,a,n,i,l,s]}class Oe extends oe{constructor(e){super(),le(this,e,Ve,Ne,ne,{progress:3})}}function te(o){let e,r;return e=new Oe({props:{progress:o[2].uploadProgress,$$slots:{default:[Le]},$$scope:{ctx:o}}}),{c(){q(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,s){F(e,t,s),r=!0},p(t,s){const l={};s&4&&(l.progress=t[2].uploadProgress),s&64&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){H(e,t)}}}function Be(o){let e;return{c(){e=N("Upload Complete! Returning to list...")},l(r){e=V(r,"Upload Complete! Returning to list...")},m(r,t){T(r,e,t)},d(r){r&&g(e)}}}function Le(o){let e,r;return e=new ie({props:{type:"success",$$slots:{default:[Be]},$$scope:{ctx:o}}}),{c(){q(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,s){F(e,t,s),r=!0},p(t,s){const l={};s&64&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){H(e,t)}}}function re(o){let e,r;return e=new ie({props:{$$slots:{default:[Me]},$$scope:{ctx:o}}}),{c(){q(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,s){F(e,t,s),r=!0},p(t,s){const l={};s&68&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){H(e,t)}}}function Me(o){let e,r=o[2].error+"",t;return{c(){e=N("Error: "),t=N(r)},l(s){e=V(s,"Error: "),t=V(s,r)},m(s,l){T(s,e,l),T(s,t,l)},p(s,l){l&4&&r!==(r=s[2].error+"")&&we(t,r)},d(s){s&&g(e),s&&g(t)}}}function se(o){let e,r;return e=new ve({props:{className:"w-full my-3",disabled:o[1],$$slots:{default:[Re]},$$scope:{ctx:o}}}),{c(){q(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,s){F(e,t,s),r=!0},p(t,s){const l={};s&2&&(l.disabled=t[1]),s&64&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){H(e,t)}}}function Re(o){let e;return{c(){e=N("Submit")},l(r){e=V(r,"Submit")},m(r,t){T(r,e,t)},d(r){r&&g(e)}}}function qe(o){let e,r,t,s,l,n,i,a,f,$,w,D,O,P,I,C,U,K,u=o[1]&&!o[2].error&&te(o),c=o[2].error&&re(o),p=!o[1]&&se(o);return{c(){e=E("div"),r=E("h2"),t=N("Upload a Document"),s=S(),l=E("form"),n=E("div"),i=E("label"),a=N("Choose file"),f=S(),$=E("input"),w=S(),D=E("div"),O=S(),u&&u.c(),P=S(),c&&c.c(),I=S(),p&&p.c(),this.h()},l(d){e=v(d,"DIV",{class:!0});var b=A(e);r=v(b,"H2",{class:!0});var W=A(r);t=V(W,"Upload a Document"),W.forEach(g),s=j(b),l=v(b,"FORM",{});var k=A(l);n=v(k,"DIV",{class:!0});var B=A(n);i=v(B,"LABEL",{for:!0,class:!0});var X=A(i);a=V(X,"Choose file"),X.forEach(g),f=j(B),$=v(B,"INPUT",{type:!0,name:!0,id:!0,class:!0}),B.forEach(g),w=j(k),D=v(k,"DIV",{class:!0}),A(D).forEach(g),O=j(k),u&&u.l(k),P=j(k),c&&c.l(k),I=j(k),p&&p.l(k),k.forEach(g),b.forEach(g),this.h()},h(){h(r,"class","text-3xl font-bold m-10"),h(i,"for","file-input"),h(i,"class","sr-only"),h($,"type","file"),h($,"name","file-input"),h($,"id","file-input"),h($,"class","block w-full border border-gray-200 shadow-sm rounded-md text-sm focus:z-10 focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:m-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-violet-700 hover:file:bg-violet-100"),h(n,"class","w-42"),h(D,"class","my-4"),h(e,"class","w-full max-w-md mx-auto p-6")},m(d,b){T(d,e,b),_(e,r),_(r,t),_(e,s),_(e,l),_(l,n),_(n,i),_(i,a),_(n,f),_(n,$),_(l,w),_(l,D),_(l,O),u&&u.m(l,null),_(l,P),c&&c.m(l,null),_(l,I),p&&p.m(l,null),C=!0,U||(K=[x($,"change",o[4]),x(l,"submit",he(o[3]))],U=!0)},p(d,[b]){d[1]&&!d[2].error?u?(u.p(d,b),b&6&&m(u,1)):(u=te(d),u.c(),m(u,1),u.m(l,P)):u&&(L(),y(u,1,1,()=>{u=null}),M()),d[2].error?c?(c.p(d,b),b&4&&m(c,1)):(c=re(d),c.c(),m(c,1),c.m(l,I)):c&&(L(),y(c,1,1,()=>{c=null}),M()),d[1]?p&&(L(),y(p,1,1,()=>{p=null}),M()):p?(p.p(d,b),b&2&&m(p,1)):(p=se(d),p.c(),m(p,1),p.m(l,null))},i(d){C||(m(u),m(c),m(p),C=!0)},o(d){y(u),y(c),y(p),C=!1},d(d){d&&g(e),u&&u.d(),c&&c.d(),p&&p.d(),U=!1,ye(K)}}}function ze(o,e,r){let t;ae(o,ue,a=>r(2,t=a));let s,l=!1;async function n(){r(1,l=!0),await Ce(s[0]),t.error?r(1,l=!1):setTimeout(()=>{Ee("/documents"),r(1,l=!1)},2e3)}ke(Te);function i(){s=this.files,r(0,s)}return[s,l,t,n,i]}class Ge extends oe{constructor(e){super(),le(this,e,ze,qe,ne,{})}}export{Ge as default};
